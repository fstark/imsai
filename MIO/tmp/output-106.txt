MIOA.PRN PASE 3 -
3143 CASF31 JZ ‘SOUTL
31a6 78 Mov A,B
31A7 0342 OUT SIO 7CHAR OUT = +
31A9 C9 RET
. ;INPUT A CHAR WHEN READY. IF AN ERROR
;OCCURS, PUT PE,CE,FE,RRDY,TROY IN 4 TO 0
31aA DB43 SINP: IN CNT }SEE IF READY ON ERROR
31AC E60R ANT OAH
31AE C8 RZ
31AF EEA XRI_OAH ;YES, TEST ERROR
31B1 CABA31 32 SINL
31B4 EEO2 XRI 2 ;SEE IF OLD ERROR PLAG
3136 C8 Rz IF SO, RETURN
3187 DB42 IN SIO 7NO ERROR, GET CHAR
3139 €9 RET
31BA 3680 SINL: MVI A,80E ;GET ERROR BITS
318C D343 OUT CNT ;PARITY ERROR
313E DB43 IN CNT
. 310 £608 ANI 3
31¢2 07 RLC
31¢3 47 MOV B,A
31c4 3ECc0 MVI A, OCOH ;PRAMING ERROR
31C6 D343 ouT CNT
31c8 DB43 . IN CNT
31CA £508 ANT 8
3icc OF RRC
31cD 80 ADD 8
31CE 47 MOV 8,
31CF 3£40 - MVE A, 40H ;OVERUN,RRDY AND TRDY
31D1 0343 OUT CNT
‘ 31D3 DB43 IN CNT
31D5 £60B ANI 088
31D7 80 ADD 3
31D8 47 MOV BLA
31D9 DB42 IN SIO ;CLEAR CHARACTER
3108 AF XRA A ;RESET CONTROL FOR ERROR FLAG
31pc 0343 OUT cNT
31DE £680 ORI 30H
3160 73 yov A,B
31£1 C9 RET
FINPUT SENSE SWITCHES-DELAY IF DIPPERENT
3162 DBFF SSIN: IN SSPT iGET THEM
31E4 47 MOV B.A
31E5 3AFA31 LDA SSAV ;COMPARE WITH PAST
31E8 AB XRA B
31B9 78 MOV A,B
31EA C8 RZ
315B CDFB31 CALL DLAS }DIPPERENT WAIT FOR A WAILE
31BE CDFB31 CALL DLAS
3LF1 CDFB31 CALL OLAS :
31P4 DBFP IN SsPT ;GET NEW VALUE
316 32FA31 STA SSAV
31F9 C9 RET
31PA 00 SSAV: DB O :
;DELAY 5 SECONDS. - REQUIRES 10 MILLION CYCLES (APPROXIMATELY
31FB 3E00 DLAS: MVI A,O .
31fD OECo MVI_C,201
31FF CD0B32 © DLAS1: CALL DONE
