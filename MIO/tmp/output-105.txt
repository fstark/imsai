MIOA.PRN PAGE 2 5
; 4 TO 0 RESPECTIVELY. COMPARE RECEIVED CHAR
z WITH TRANSMITTED CHAR. CISPLAY OFEH IF DIFFERENT
; FOLLOWED 3Y TRANSMITTSQ CHAR AND
; . RECEIVED CHAR. IN NORMAL OPERATION OISPLAY
3 . TRANSMITTED CaAR.
3145 310636 © S103: LXI._ SP, STACK
3148 AP xRA A ;SET CONTROL
3149 0343 cur NT
314B OE0O MI C,0 ;ORIGINAL CHAR VALUE .
314D DBFe $t03l: IN SSPT 7GEP ORIGINAL SENSE SWITCH
314P 32PA31 STA SSAV
3152 2F CMA :FORM CRAR
3153 AL ANA C
3154 oc INR C ;SET NEXT VALUE
3155 57 MOV D,A ;SAVE IT POR COMPARE
3156 27 CHA ;POR PROPER LIGaTS
3157 o3P2 OUT ssPT ;BISPLAY IT
3159 2F CMA ;EOR PROPER VALUE
315A CD9E31 CALL SOUT ;OUTPUT IT
315D CDAA31 = SI032: CALL SINP ;TEST INPUT
3160 CASD31 JZ $1032 sIP NONE READY
3163 FA8131 JM $1033 ON ERROR
3166 5F yOV E,A MASS INPUT
3167 3AFA31 BDA SSAV .
316a 2F CMA
316B a3 ANA & :
316C 8A CMPD ;COMPARE WITH OUTPUT
3160 CA4D31 32 st031 }RELOOP IF OK
\3170 SF . MOV E,A - :
3171 3EFE MVI A,OFEH ;ERROR PLAG
3173 cD8e31 CALL DISP ;DISPLAY TILL SENSE SWITCHES CHANGE
3176 7a MOV A,D ;TRANS CHAR
3177 CD8E31 CALL DISP
317A 78 MOV A,E ;RECEIVED CHAR
317B CD8E31 CALL DISP
317E 34032 JMP STO31
3181 37 $1033: MOV D,A ;SAVE ERRORS
3182 jerE MVI A,OFER ;ERROR FLAG
3184 CO8E31 CALL DISP
3187 7a MOV A,D ;STATUS RESULTS
3188 CDSE31 “CALL OISP
3188 (634031 JUMP sTO31
;GENERAL UTILITY ROUTINES FOR SIO TEST.
;THIS ROUTINE DISPLAYS TSE VALUE IN A UNTIL
}SENSE SWITCHES ARE CHANGED.
318E 2F DISP: CMA ;FOR PROPER LIGHTS
319P D3FP Our ssPr
3191 oBEF IN SSPT sINITIAL SENSE SWITCHES
3193 47 MOV 8,A
3194 CDFS31 CALL DLAS ;WAIT A WHILE
3197 DBFP DISi: IN SSPT *GNEW VALUE? :
3199 a8 XRA B
319A Cag731 JZ DISL ;WAIT FOR DIFFERENCE
319D C9 RET
sOUTPUT CHARACTER IN A WHEN DEVICE READY.
319E 47 SOUT: HOV B,A ;WAIT TIL READY
319P D843 SOUTL: IN CNT
31Al E601 ANI 1
