MIOA.PRN PACE 7
3323 cp6a33 CALL GaYT ;CRC BYTE 1
3326 cp8r33 CALL CRC ;EORM VALUE .
3329 CD6A33 CALL GBYT yeYTE 2
332¢ cosr33 CALL CRC }FOR THE LAST TIME!
332F 79 ¥OV A,C SET FLAG
3330 30 ORA 8
3331 ¢9 PET
3332 349032 -RBSN: = LDA TYPF ;SYNC IF REQUIRED
3335 AT ANA A
3336 cB RZ
3337 1600 MVI D,0 ;SET FOR BIT SYNC RECOGNITION
"3339 CD4c33| © RBS2: CALL -RBSL ;NOW WAIT FOR A ZERO BIT FOLLOWED
333¢ 17 RAL ;BY EIGHT ONES SO 4AVE
333D DA3933 JC ReS2 ;TARBELL BYTE SAME AS LANCASTER BIT.
3340 CD4c33 CALL RBSL 3HAVE A ZERO LCOK FOR ONES
3343 3c INR A
3344 €23933 INZ RBS2
3347 3620 MVI A,20B
3349 D343 cur cnr ALL SET, SEP TO GET 3Y¥TES FROM NOW ON
3348 co RET
334 DB43 RBS1: IN CNT
334E E604 ANI 4
2350 CA4C33 JZ RES1
3353 DB40 In CRI
3355 c9 RET
3356 0B43 GBIT: IN CNT 7GET BYTE AFTER NEXT BIT SHIFT
3358 E604 ANI 4
. 335a CA5633 3% GBIT
335D 3A9D32 LDA TYPF
3360 a7 ANA A
3361 pB40 IN CRI
3363 C8 RZ ;RETURN ON TARBELL
3364 C601 aDI 1 ;CONVERT TO 1 OR 0 BIT
3366 7A Mov A,
3367 17 RAL 7ADD TO BYTE
3368 57 MOV D/A
3369 C9 RET
336A 0B43 caYT: IN CNT ;WAIT TIL READY
336C E604 ANI 4
336E CA6A33 JZ GBYT
3371 3a9D32 - | LDA TYP ;CHECK MODE
3374 a7 ANA A
3375 C27833 JN2 GBYTL
3378 DB40 IN CRI ;TARBELL, JUST READ BYTE
337A C9 RET
3378 £5 GaYTl: PUSH # ;LANCASTER NEED TO ASSEMBLE A BYTE
337¢ 2607 MvI 4,7
337E pa40 IN CRI ;EIRST BIT
3380 57 MOV D,A
3381 cD4Cc33 GBYT2: CALL RBS1 7GET NEXT TARBELL S3YTE=LANCASTER BIT
3384 C601 ADT 1 .
3386 7A Mov A,D
3387 17 RAL
333857 » HOV D,A ;ADD TO BYTE
3389 25 OCR a
338A C28133 JNZ GBYT2
338D 1 POP A
338E C9 RET
